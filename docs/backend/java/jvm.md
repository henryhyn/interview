# JVM

## 你能简述一下 Java 的内存模型吗？

Java 内存模型 (Java Memory Model，JMM) 是 Java 虚拟机 (JVM) 在计算机内存 (RAM) 中的操作规范，它描述了 Java 程序中各种变量（线程共享的实例字段，静态字段和数组）的访问规则，以及在并发环境中如何同步这些变量。

Java 内存模型主要包括以下几个部分：

1. 堆 (Heap)：这是 JVM 中最大的一块内存区域，主要用于存放对象实例。所有线程共享堆内存。
2. 栈 (Stack)：每个线程都有自己的栈，用于存放局部变量、方法调用等。栈是线程私有的，其他线程无法访问。
3. 方法区 (Method Area)：存储已被加载的类信息、常量、静态变量等数据。
4. 程序计数器 (Program Counter Register)：每个线程都有自己的程序计数器，用于记录当前线程执行的字节码指令的行号。
5. 本地方法栈 (Native Method Stack)：与操作系统相关，用于支持 native 方法的执行。

Java 内存模型还定义了线程之间如何通过内存进行交互，即：线程如何通过读/写操作来获取/改变共享变量的值，以及这些操作如何同步。这是为了解决由于多线程并发导致的一致性问题。

Java 内存模型规定了所有的变量都存储在主内存中，每个线程都有自己的工作内存，线程的工作内存中保存了被该线程使用到的变量的主内存副本拷贝。线程对变量的所有操作（读取、赋值）都必须在工作内存中进行，而不能直接读写主内存中的数据。不同线程之间无法直接访问对方工作内存中的变量，线程间变量值的传递需要通过主内存来完成。
